!function(){"use strict";function t(e){t.super(this),this.Address.text=e.substring(2);var n=0,s=function(){goblin.util.drawQRCode("ethereum:"+e+"?value="+n,this.WalletIcon)}.bind(this);s(),this.EditMoney.on(i.INPUT,this,function(){try{n=web3.toWei(new web3.BigNumber(this.EditMoney.text),"ether")}catch(t){this.EditMoney.text="",n=new web3.BigNumber(0)}s()}),this.BtnBack.on(i.CLICK,this,function(){this.destroy()}),this.BtnCopy.on(i.CLICK,this,function(){goblin.util.copyToClipboard(this.Address.text)})}laya.utils.Handler;var i=laya.events.Event;Laya.class(t,"Deposit",DepositUI)}(),"undefined"!=typeof __GAME_ENTRY__&&function(){"use strict";function t(){t.super(this);var e=null,n=null,o=null,r=[];h>=0&&(r[h]={Icon:"resource/icon1.png"}),l>=0&&(r[l]={Icon:"resource/icon2.png"}),d>=0&&(r[d]={Icon:"resource/icon3.png"}),this.GameList.array=r,this.GameList.vScrollBarSkin="";var a=function(){e&&!e.destroyed?this.parent.addChild(e):goblin.newKuaisanMain(this.parent,function(t){e=t})},m=function(){n&&!n.destroyed?this.parent.addChild(n):goblin.newCoinFlippingMain(this.parent,function(t){n=t})},x=function(){o&&!o.destroyed?this.parent.addChild(o):goblin.newBallgameBettingMain(this.parent,function(t){o=t})};this.GameList.renderHandler=new c(this,function(t,i){switch(i){case h:t.on(u.CLICK,this,a);break;case l:t.on(u.CLICK,this,m);break;case d:t.on(u.CLICK,this,x)}});var f=0;this.BtnFunc.selectedIndex=f,this.BtnFunc.on(u.CLICK,this,function(){if(this.BtnFunc.selectedIndex==b){this.BtnFunc.selectedIndex=f;var t=new goblin.misc.Loading(goblin.texts[1001]);this.parent.addChild(t),goblin.updateRecords(function(i){this.parent.removeChild(t),this.parent.addChild(new s(i))}.bind(this))}else this.BtnFunc.selectedIndex==g?(this.BtnFunc.selectedIndex=f,this.parent.addChild(new i(this))):f=this.BtnFunc.selectedIndex})}function i(t){i.super(this);var n="0x"+ethereumjs.Util.privateToAddress(goblin.privateKey).toString("hex");this.Address.text=n.substring(2),goblin.util.drawQRCode("ethereum:"+n,this.WalletIcon),this.BtnBack.on(u.CLICK,this,function(){this.destroy()}),this.BtnLoginOut.on(u.CLICK,this,function(){goblin.privateKey=null,goblin.newLoginMain(this.parent),this.destroy(),t.destroy()}),this.BtnRecharge.on(u.CLICK,this,function(){this.parent.addChild(new Deposit(n))});var s=new web3.BigNumber(0),o=new web3.BigNumber(0),r=function(){var t=0,i=function(){--t>=1||(this.TotalMoney.text=web3.fromWei(s.add(o),"ether").toNumber().toFixed(goblin.valuePrecision),this.Txt1.text=goblin.currencyName)}.bind(this);web3.eth.getBalance(n,function(t,e){t&&(console.log("wallet get eth error: "+t.toString()),e=0),s=e,this.BtnTransfer.disabled=s.eq(0),this.BetMoney.text=web3.fromWei(s,"ether").toNumber().toFixed(goblin.valuePrecision),this.Txt2.text=goblin.currencyName,i()}.bind(this)),++t,goblin.contract.bank.get_balance({from:n},function(t,e){t&&(console.log("wallet get bonus money error: "+t.toString()),e=0),o=e,this.BtnCash.disabled=o.eq(0),this.BonusMoney.text=web3.fromWei(o,"ether").toNumber().toFixed(goblin.valuePrecision),this.Txt3.text=goblin.currencyName,i()}.bind(this)),++t}.bind(this);r(),this.BtnTransfer.on(u.CLICK,this,function(){this.parent.addChild(new e(n,s,r))}),this.BtnCash.on(u.CLICK,this,function(){var t=goblin.contract.bank,i={to:t.address,data:t.withdraw.getData(n,o)},e=new goblin.misc.Loading(goblin.texts[1057]);this.parent.addChild(e),goblin.util.buildTxParams(i,goblin.privateKey).then(function(){return goblin.util.sendTransactionAndGetReceipt(i,goblin.privateKey)}).then(function(t){this.parent.removeChild(e),this.parent.addChild(new goblin.misc.Tips(goblin.texts[1058])),r()}.bind(this)).catch(function(t){this.parent.removeChild(e),goblin.util.displayTransactionError(t,this.parent)}.bind(this))}),this.BtnCopy.on(u.CLICK,this,function(){goblin.util.copyToClipboard(this.Address.text)}),this.BtnOut.on(u.CLICK,this,function(){var t=JSON.stringify(goblin.keyObject),i=new Blob([t],{type:"text/plain;charset=utf-8"}),e=keythereum.generateKeystoreFilename(goblin.keyObject.address);saveAs(i,e)})}function e(t,i,s){e.super(this);var o=new web3.BigNumber(0),r=new web3.BigNumber(0);web3.eth.getGasPrice(function(t,i){if(t)throw t;o=goblin.util.gasPriceScale(i),this.EditGasPrice.text=o.toString(),h(),l()}.bind(this));var a;a={from:t,to:t,value:i,data:web3.toHex("*".repeat(80))},web3.eth.estimateGas(a,function(t,i){if(t)throw t;r=new web3.BigNumber(i).add(1),this.EditGasLimit.text=r.toString(),h(),l()}.bind(this));var h=function(){this.Loss.text=goblin.texts[1002].format(web3.fromWei(o.mul(r),"ether").toString()+" "+goblin.currencyName)}.bind(this);h();var l=function(){this.BtnNext.disabled=this.EditAddress.text.length*this.EditMoney.text.length*this.EditGasPrice.text.length*this.EditGasLimit.text.length==0}.bind(this);l(),this.EditGasLimit.on(u.INPUT,this,function(){try{r=new web3.BigNumber(this.EditGasLimit.text)}catch(t){this.EditGasLimit.text="",r=new web3.BigNumber(0)}h(),l()}),this.EditGasPrice.on(u.INPUT,this,function(){try{o=new web3.BigNumber(this.EditGasPrice.text)}catch(t){this.EditGasPrice.text="",o=new web3.BigNumber(0)}h(),l()}),this.EditAddress.on(u.INPUT,this,function(){"0x"==this.EditAddress.text.substring(0,2).toLowerCase()&&(this.EditAddress.text=this.EditAddress.text.substring(2)),ethereumjs.Util.isValidAddress("0x"+this.EditAddress.text)||(this.EditAddress.text=""),l()});var d=new web3.BigNumber(0);this.EditMoney.on(u.INPUT,this,function(){try{d=web3.toWei(new web3.BigNumber(this.EditMoney.text),"ether")}catch(t){this.EditMoney.text="",d=new web3.BigNumber(0)}d.gt(i)&&(this.EditMoney.text="",d=new web3.BigNumber(0)),l()}),this.BtnNext.on(u.CLICK,this,function(){var i=t,e="0x"+this.EditAddress.text;a={from:i,to:e,value:d,data:web3.toHex(this.EditNote.text),gasLimit:r,gasPrice:o},web3.eth.getTransactionCount(a.from,function(t,h){if(t)throw t;a.nonce=h,this.parent.addChild(new n(this,i,e,o.mul(r),d,a,s))}.bind(this))}),this.BtnBack.on(u.CLICK,this,function(){this.destroy()}),this.BtnMore.on(u.CLICK,this,function(){var t=this.BtnMore.selected;this.EditGasPrice.visible=t,this.EditGasLimit.visible=t,this.Loss.visible=t}),this.AbleWithDraw.text+=web3.fromWei(i,"ether").toNumber().toFixed(goblin.valuePrecision)+" "+goblin.currencyName}function n(t,i,e,s,o,r,a){n.super(this),this.BtnBack.on(u.CLICK,this,function(){this.destroy()}),this.BtnConfirm.on(u.CLICK,this,function(){var i=new goblin.misc.Loading(goblin.texts[1003]);this.parent.addChild(i),goblin.util.sendTransactionAndGetReceipt(r,goblin.privateKey).then(function(e){this.parent.removeChild(i),this.parent.addChild(new goblin.misc.Tips(goblin.texts[1004],function(){this.destroy(),t.destroy()}.bind(this))),a()}.bind(this)).catch(function(e){goblin.util.displayTransactionError(e,this.parent),this.parent.removeChild(i),this.destroy(),t.destroy()}.bind(this))}),this.RecipientAddress.text=e.substring(2),this.PaymentAddress.text=i.substring(2),this.TransFee.text=web3.fromWei(s,"ether"),this.TransAmount.text=web3.fromWei(o,"ether")}function s(t){s.super(this),this.RecordList.vScrollBarSkin="",this.RecordList.array=t,0==t.length?this.Desc.text=goblin.texts[1065]:this.Desc.text="",this.BtnBack.on(u.CLICK,this,function(){this.destroy()}),this.BtnRefresh.on(u.CLICK,this,function(){this.BtnRefresh.disabled=!0,goblin.updateRecords(function(i){this.BtnRefresh.disabled=!1,t=i,this.RecordList.array=t}.bind(this))});var i=function(i){var e=t[i]._raw;e._type==goblin.RECORD_TYPE_KUAISAN?this.parent.addChild(new o(e)):e._type==goblin.RECORD_TYPE_COIN_FLIPPING?this.parent.addChild(new r(e)):e._type==goblin.RECORD_TYPE_BALLGAME_BETTING&&this.parent.addChild(new a(e))}.bind(this);this.RecordList.renderHandler=new c(this,function(t,e){t.on(u.CLICK,this,i,[e])})}function o(t){if(o.super(this),this.on(u.CLICK,this,function(){this.destroy()}),void 0==t._luckyNumber)this.Result.text=goblin.texts[1029].format(t._roundNumber),this.Result.valign="middle",this.Num1.visible=!1,this.Num2.visible=!1,this.Num3.visible=!1;else{this.Result.text=goblin.texts[1051].format(t._roundNumber);var i=t._luckyNumber.toString().split("").map(Number);this.Num1.skin="resource/dice{}.png".format(i[0]),this.Num2.skin="resource/dice{}.png".format(i[1]),this.Num3.skin="resource/dice{}.png".format(i[2])}void 0==t._bonus?(this.Status.text=goblin.util.makeText(t._rawText),this.BonusTitle.visible=!1,this.Bonus.visible=!1):(this.Status.text=goblin.texts[1032],this.Bonus.text=t._bonus.toFixed(goblin.valuePrecision)+" "+goblin.currencyName),this.Type.text+=goblin.util.makeText(t._rawType),this.Numbers.text=goblin.util.makeText(t._rawNumbers),this.Hands.text="{}{}{}{}".format(t._hands,goblin.texts[1005],t._factor,goblin.texts[1019]),this.Price.text=goblin.util.makeText(t._rawPrice)}function r(t){r.super(this),this.on(u.CLICK,this,function(){this.destroy()}),void 0==t._luckySide?(this.Result.text=goblin.texts[1029].format(t._roundNumber),this.Result.valign="middle",this.Coin.visible=!1):(this.Result.text=goblin.texts[1064].format(t._roundNumber),0==t._luckySide?this.Coin.skin="resource/coin_heads.png":this.Coin.skin="resource/coin_tails.png"),void 0==t._bonus?(this.Status.text=goblin.util.makeText(t._rawText),this.BonusTitle.visible=!1,this.Bonus.visible=!1):(this.Status.text=goblin.texts[1032],this.Bonus.text=t._bonus.toFixed(goblin.valuePrecision)+" "+goblin.currencyName),this.Numbers.text=goblin.util.makeText(t._rawType),this.Price.text=goblin.util.makeText(t._rawPrice)}function a(t){a.super(this),this.on(u.CLICK,this,function(){this.destroy()}),void 0==t._scores||0==t._scores.length?this.TxtResult.text=goblin.texts[1095].format("∞","∞"):this.TxtResult.text=goblin.texts[1095].format(t._scores[0],t._scores[1]),void 0==t._bonus?(this.Status.text=goblin.util.makeText(t._rawText),this.BonusTitle.visible=!1,this.Bonus.visible=!1):(this.Status.text=goblin.texts[0==t._scores.length?1094:1032],this.Bonus.text=t._bonus.toFixed(goblin.valuePrecision)+" "+goblin.currencyName),this.HomeName.text=goblin.config.ballgameBetting.teamName(t._matchData.team1_id),this.VisitorName.text=goblin.config.ballgameBetting.teamName(t._matchData.team2_id),this.Type.text+=goblin.util.makeText(t._rawType);for(var i=[],e=0;e<t._betNameTextIDs.length;++e)i.push(goblin.texts[t._betNameTextIDs[e]]);this.Numbers.text=i.join(", "),this.Price.text=goblin.util.makeText(t._rawPrice)}var h,l,d,c=laya.utils.Handler,u=laya.events.Event,b=1,g=2,m=function(t){var i=0,e=function(){--i>=1||t()},n=0;goblin.contract.coinFlipping.get_disabled(function(t,i){l=i?-1:n++,e()}),++i,goblin.contract.kuaisan.get_disabled(function(t,i){h=i?-1:n++,e()}),++i,goblin.contract.ballgameBetting.get_disabled(function(t,i){d=i?-1:n++,e()}),++i};Laya.class(t,"HomeMain",HomeMainUI),Laya.class(i,"MyWallet",MyWalletUI),Laya.class(e,"WithDraw",WithDrawUI),Laya.class(n,"WithDrawConfirm",WithDrawConfirmUI),Laya.class(s,"Record",RecordUI),Laya.class(o,"RecordInfo",RecordInfoUI),Laya.class(r,"CoinFlippingRecordInfo",RecordInfo1UI),Laya.class(a,"BallgameBettingRecordInfo",RecordInfo2UI),goblin.newHomeMain=function(i,e){var n=new goblin.misc.Loading(goblin.texts[1001]);i.addChild(n),m(function(){i.removeChild(n);var s=new t;i.addChild(s),e(s)})}}();