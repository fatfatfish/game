"undefined"!=typeof __BANK_ENTRY__&&function(){"use strict";function t(t,i,e){var s;switch(t.toNumber()){case goblin.bank.ADD_MANAGER:s=goblin.texts[1104].format(goblin.texts[1106],goblin.util.uint256ToAddress(i));break;case goblin.bank.REMOVE_MANAGER:s=goblin.texts[1105].format(goblin.texts[1106],goblin.util.uint256ToAddress(i));break;case goblin.bank.ADD_GAME:s=goblin.texts[1104].format(goblin.texts[1107],goblin.util.uint256ToAddress(i));break;case goblin.bank.REMOVE_GAME:s=goblin.texts[1105].format(goblin.texts[1107],goblin.util.uint256ToAddress(i));break;case goblin.bank.ADD_GAME_ADMIN:s=goblin.texts[1104].format(goblin.texts[1108],goblin.util.uint256ToAddress(i));break;case goblin.bank.REMOVE_GAME_ADMIN:s=goblin.texts[1105].format(goblin.texts[1108],goblin.util.uint256ToAddress(i));break;case goblin.bank.ADD_BENEFICIARY:s=goblin.texts[1104].format(goblin.texts[1109],goblin.util.uint256ToAddress(i));break;case goblin.bank.REMOVE_BENEFICIARY:s=goblin.texts[1105].format(goblin.texts[1109],goblin.util.uint256ToAddress(i));break;case goblin.bank.BENEFIT:s=goblin.texts[1112].format(web3.fromWei(e,"ether").toNumber().toFixed(goblin.valuePrecision),goblin.util.uint256ToAddress(i))}return s}function i(){i.super(this),this.BtnLoginOut.on(l.CLICK,this,function(){goblin.privateKey=null,goblin.newLoginMain(this.parent),this.destroy()});var s="0x"+ethereumjs.Util.privateToAddress(goblin.privateKey).toString("hex");this.Address.text=s.substr(2),goblin.util.drawQRCode("ethereum:"+s,this.QRCode);var d,h=function(){this.BtnAccept.visible=this.BtnReject.visible=this.BtnAccepted.visible=!1,this.BtnAdmin.disabled=this.BtnAccount.disabled=this.BtnMoney.disabled=this.BtnContract.disabled=!0,b.get_proposal(function(i,e){if(i)throw i;if(d=e.length>=1){this.TxtCurProposalDesc.text=t(e[0],e[1],e[2]);var n=new web3.BigNumber(s),o=0;for(o=3;o<e.length&&!e[o].eq(n);++o);o<e.length?this.BtnAccepted.visible=!0:this.BtnAccept.visible=this.BtnReject.visible=!0}else this.TxtCurProposalDesc.text="";this.BtnAdmin.disabled=this.BtnAccount.disabled=this.BtnMoney.disabled=this.BtnContract.disabled=!1}.bind(this)),b.get_last_proposal_record(function(i,e){if(i)throw i;0==e.length?(this.TxtLastProposalDesc.text="",this.TxtLastProposalStatus.text=""):(this.TxtLastProposalDesc.text=t(e[0],e[1],e[2]),this.TxtLastProposalStatus.text=e[3].eq(0)?goblin.texts[1111]:goblin.texts[1110])}.bind(this)),this.Money.text="--",web3.eth.getBalance(s,function(t,i){if(t)throw t;this.Money.text=web3.fromWei(i,"ether").toNumber().toFixed(goblin.valuePrecision)}.bind(this))}.bind(this);h(),this.BtnRefresh.on(l.CLICK,this,h),this.BtnAccept.on(l.CLICK,this,function(){c({to:b.address,data:b.accept_proposal.getData()},this.parent,h)}),this.BtnReject.on(l.CLICK,this,function(){c({to:b.address,data:b.reject_proposal.getData()},this.parent,h)}),this.BtnAdmin.on(l.CLICK,this,function(){this.parent.addChild(new e(r,d,h))}),this.BtnAccount.on(l.CLICK,this,function(){this.parent.addChild(new e(o,d,h))}),this.BtnContract.on(l.CLICK,this,function(){this.parent.addChild(new e(a,d,h))}),this.BtnMoney.on(l.CLICK,this,function(){this.parent.addChild(new n(s,d,h))})}function e(t,i,n){e.super(this),this.AddressList.array=[],this.AddressList.vScrollBarSkin="";var d=null,u=null,g=null,A=0;t==a?(this.Title.text=goblin.texts[1113].format(goblin.texts[1107]),this.BtnAdd.label=goblin.texts[1114].format(goblin.texts[1107]),d=b.get_games,u=b.add_game,g=b.remove_game):t==r?(this.Title.text=goblin.texts[1113].format(goblin.texts[1108]),this.BtnAdd.label=goblin.texts[1114].format(goblin.texts[1108]),d=b.get_game_admins,u=b.add_game_admin,g=b.remove_game_admin):t==o&&(this.Title.text=goblin.texts[1113].format(goblin.texts[1106]),this.BtnAdd.label=goblin.texts[1114].format(goblin.texts[1106]),d=b.get_managers,u=b.add_manager,g=b.remove_manager);var f=function(t){c({to:b.address,data:g.getData(t)},this.parent,x)};this.AddressList.renderHandler=new h(this,function(e,s){var n=e.getChildByName("BtnDelete");n.on(l.CLICK,this,f,[this.AddressList.array[s].Address]),i&&(n.disabled=!0),t==o&&this.AddressList.array.length<3?n.visible=!1:i&&(n.disabled=!0)}),d.call(b,function(t,i){if(t)throw t;for(var e=[],s=0;s<i.length;++s)e.push({Address:goblin.util.uint256ToAddress(i[s])});this.AddressList.array=e}.bind(this)),this.BtnBack.on(l.CLICK,this,function(){this.destroy(),A>=1&&n()}),this.BtnAdd.on(l.CLICK,this,function(){this.parent.addChild(new s(this.BtnAdd.label,u,x))}),i&&(this.BtnAdd.disabled=!0);var x=function(){i=!0,this.BtnAdd.disabled=!0,this.AddressList.refresh(),++A}.bind(this)}function s(t,i,e){s.super(this),this.Title.text=t,this.BtnClose.on(l.CLICK,this,function(){this.destroy()}),this.BtnOk.on(l.CLICK,this,function(){c({to:b.address,data:i.getData("0x"+this.Address.text)},this.parent,function(){this.destroy(),e()}.bind(this))});var n=function(){this.BtnOk.disabled=0==this.Address.text.length}.bind(this);n(),this.Address.on(l.INPUT,this,function(){"0x"==this.Address.text.substring(0,2).toLowerCase()&&(this.Address.text=this.Address.text.substring(2)),ethereumjs.Util.isValidAddress("0x"+this.Address.text)||(this.Address.text=""),n()})}function n(t,i,e){n.super(this),this.Currency1.text=this.Currency2.text=goblin.currencyName;var o=0;this.BtnBack.on(l.CLICK,this,function(){this.destroy(),o>=1&&e()});var a;this.BtnTransfer.disabled=!0,web3.eth.getBalance(b.address,function(t,e){if(t)throw t;a=e,this.Money.text=web3.fromWei(a,"ether").toNumber(),a.eq(0)||i||(this.BtnTransfer.disabled=!1)}.bind(this)),b.get_total_balance(function(t,i){if(t)throw t;this.Bonus.text=web3.fromWei(i,"ether").toNumber().toFixed(goblin.valuePrecision)}.bind(this));var r=function(){i=!0,this.BtnAdd.disabled=!0,this.BtnTransfer.disabled=!0,this.AddressList.refresh(),++o}.bind(this),u=function(t){c({to:b.address,data:b.remove_beneficiary.getData(t)},this.parent,r)};this.AddressList.renderHandler=new h(this,function(t,e){var s=t.getChildByName("BtnDelete");s.on(l.CLICK,this,u,[this.AddressList.array[e].Address]),i&&(s.disabled=!0)});var g=[];this.AddressList.array=g,this.AddressList.vScrollBarSkin="",b.get_beneficiaries(function(t,i){if(t)throw t;for(var e=[],s=0;s<i.length;++s){var n=goblin.util.uint256ToAddress(i[s]);g.push(n),e.push({Address:n})}this.AddressList.array=e}.bind(this)),this.BtnAdd.on(l.CLICK,this,function(){this.parent.addChild(new s(this.BtnAdd.label,b.add_beneficiary,r))}),i&&(this.BtnAdd.disabled=!0),this.BtnRecharge.on(l.CLICK,this,function(){this.parent.addChild(new Deposit(b.address))}),this.BtnTransfer.on(l.CLICK,this,function(){this.parent.addChild(new d(a,g,function(){this.destroy(),e()}.bind(this)))})}function d(t,i,e){d.super(this),this.BtnBack.on(l.CLICK,this,function(){this.destroy()}),this.AbleWithDraw.text+=web3.fromWei(t,"ether").toNumber().toFixed(goblin.valuePrecision)+" "+goblin.currencyName,this.ChooseAddress.labels=i.join(",");var s=function(){this.BtnOk.disabled=this.ChooseAddress.selectedIndex<0||0==this.EditMoney.text.length}.bind(this);s();var n=new web3.BigNumber(0);this.EditMoney.on(l.INPUT,this,function(){try{n=web3.toWei(new web3.BigNumber(this.EditMoney.text),"ether")}catch(t){this.EditMoney.text="",n=new web3.BigNumber(0)}n.gt(t)&&(this.EditMoney.text="",n=new web3.BigNumber(0)),s()}),this.ChooseAddress.on(l.CHANGE,this,function(){s()}),this.BtnOk.on(l.CLICK,this,function(){c({to:b.address,data:b.benefit.getData(i[this.ChooseAddress.selectedIndex],n)},this.parent,function(){this.destroy(),e()}.bind(this))})}goblin.bank={NO:0,ADD_MANAGER:1,REMOVE_MANAGER:2,ADD_GAME:3,REMOVE_GAME:4,ADD_GAME_ADMIN:5,REMOVE_GAME_ADMIN:6,ADD_BENEFICIARY:7,REMOVE_BENEFICIARY:8,BENEFIT:9};var o=1,a=2,r=3,h=laya.utils.Handler,l=laya.events.Event,b=goblin.contract.bank,c=function(t,i,e){var s=new goblin.misc.Loading(goblin.texts[1098]);i.addChild(s),goblin.util.buildTxParams(t,goblin.privateKey).then(function(){return goblin.util.sendTransactionAndGetReceipt(t,goblin.privateKey)}).then(function(t){i.removeChild(s),i.addChild(new goblin.misc.Tips(goblin.texts[1099])),e()}).catch(function(t){i.removeChild(s),goblin.util.displayTransactionError(t,i)})};Laya.class(i,"AdminBankMain",AdminWalletMainUI),Laya.class(e,"AdminAddressList",AdminWalletAddressUI),Laya.class(s,"AdminAddAddress",AdminWalletAddAddressUI),Laya.class(n,"AdminMoney",AdminWalleMoneyUI),Laya.class(d,"AdminWithDraw",AdminWithDrawUI),goblin.newHomeMain=function(t,e){var s=new i;t.addChild(s),e(s)}}();