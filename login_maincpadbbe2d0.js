!function(){"use strict";function t(t,e,s){try{var i=JSON.parse(t)}catch(t){return void this.parent.addChild(new goblin.misc.Tips(goblin.texts[1027]))}o(t,s);keythereum.recover(e,i,function(t,e){t?this.parent.addChild(new goblin.misc.Tips(goblin.texts[1028])):(goblin.keyObject=i,goblin.privateKey=e,goblin.newHomeMain(Laya.stage,function(){this.destroy()}.bind(this)))}.bind(this))}function e(i){e.super(this);for(var n=[],o=/"address":\s*"([^"]+)"/,h=i.length-1;h>=0;--h)n.push(l(o.exec(i[h])[1]));this.Addresses.labels=n.join(","),this.Addresses.selectedIndex=0,this.WalletPassword.on(a.INPUT,this,function(){this.BtnLogin.disabled=0==this.WalletPassword.text.length}),this.BtnLogin.on(a.CLICK,this,function(){var e=i[i.length-this.Addresses.selectedIndex-1];t.call(this,e,this.WalletPassword.text)}),this.BtnSwitch.on(a.CLICK,this,function(){var t=i[i.length-this.Addresses.selectedIndex-1];this.parent.addChild(new s(t)),this.destroy()})}function s(e){s.super(this),void 0!=e&&(this.WalletKeystore.text=e),this.BtnLogin.disabled=this.WalletKeystore.text.length*this.WalletPassword.text.length==0,this.WalletPassword.on(a.INPUT,this,function(){this.BtnLogin.disabled=this.WalletKeystore.text.length*this.WalletPassword.text.length==0}),this.WalletKeystore.on(a.INPUT,this,function(){this.BtnLogin.disabled=this.WalletKeystore.text.length*this.WalletPassword.text.length==0}),this.BtnLogin.on(a.CLICK,this,function(){this.WalletUserName.text.length<3?this.parent.addChild(new goblin.misc.Tips(goblin.texts[1129])):t.call(this,this.WalletKeystore.text,this.WalletPassword.text,this.WalletUserName.text)}),this.BtnCreate.on(a.CLICK,this,function(){this.parent.addChild(new i(e)),this.destroy()})}function i(t){i.super(this),this.WalletPassword.on(a.INPUT,this,function(){}),this.BtnCreate.on(a.CLICK,this,function(){if(this.WalletUserName.text.length<3)this.parent.addChild(new goblin.misc.Tips(goblin.texts[1129]));else if(function(t){return!!/^(?![a-zA-z]+$)(?!\d+$)(?![!@#$%^&*]+$)[a-zA-Z\d!@#$%^&*]+$/.exec(t)}(this.WalletPassword.text)){keythereum.create({keyBytes:32,ivBytes:16},function(t){var e=this.WalletPassword.text;goblin.userName=this.WalletUserName.text,keythereum.dump(e,t.privateKey,t.salt,t.iv,{kdf:"pbkdf2",cipher:"aes-128-ctr",kdfparams:{c:65536,dklen:32,prf:"hmac-sha256"}},function(e){goblin.keyObject=e,goblin.privateKey=t.privateKey;var s=JSON.stringify(e);o(s,goblin.userName),this.parent.addChild(new n(s)),this.destroy()}.bind(this))}.bind(this))}else this.parent.addChild(new goblin.misc.Tips(goblin.texts[1128]))}),this.BtnChange.on(a.CLICK,this,function(){this.parent.addChild(new s(t)),this.destroy()})}function n(t){n.super(this),this.AccountInfo.text=t,this.BtnCopy.on(a.CLICK,this,function(){goblin.util.copyToClipboard(this.AccountInfo.text)}),this.BtnLogin.on(a.CLICK,this,function(){goblin.newHomeMain(Laya.stage,function(){this.destroy()}.bind(this))})}laya.utils.Handler;var a=laya.events.Event,o=function(t,e){var s,i=Laya.LocalStorage.getItem("keystores"),n=void 0==i?[]:JSON.parse(i),a=/"address":\s*"([^"]+)"/,o=a.exec(t)[1];for(s=0;s<n.length;++s){if(o==a.exec(n[s])[1])break}s<n.length&&n.splice(s,1),n.push(t),i=JSON.stringify(n),Laya.LocalStorage.setItem("keystores",i),void 0!=e&&Laya.LocalStorage.setItem(o,e)},l=function(t){return Laya.LocalStorage.getItem(t)||t};Laya.class(e,"QuickLogin",QuickLoginUI),Laya.class(s,"Login",LoginUI),Laya.class(i,"Create",CreateUI),Laya.class(n,"CreateSuccess",CreateSuccessUI),goblin.newLoginMain=function(t){var s=function(){var t=Laya.LocalStorage.getItem("keystores");return void 0==t?[]:JSON.parse(t)}();0==s.length?t.addChild(new i):t.addChild(new e(s))}}();